# Contracts代码

Groth16算法非常精简，优点是证明小，与区块链很般配。 然而groth16的缺点是每个电路都需要初始化设置，也就说电路升级了，就需要重置。 PLONK算法，优点是初始化设置可以共享，并支持升级，而且在电路大小不超过范围，不需要重置。

## 核心模块：

* DeployFactory.sol:  部署代理合约与升级合约。
* PlonkCore.sol: PLONK零知识证明算法实现。
* Governance.sol:  治理合约，负责代币管理，验证人管理。
* Proxy.sol:  代理合约，是所有外部调用的主入口。
* Storage.sol:  用于存储链下交互信息。
* Verifier.sol: PLONK证明验证逻辑，提供区块的聚合证明验证功能，聚合证明分1,4,8,18四种类型。
* ZkSync.sol: 主合约，核心逻辑都在该合约中实现。

## ZkSync功能点：

1. 存入的ETH或代币。将L1的资产转移到L2。
2. 赎回待定的代币或ETH。将L2取回到L1。
3. 处理退出请求。在L2挂了等异常情况下，可以将资产从合约中退出。
4. 提交链下区块。
5. 提交区块的聚合证明。
6. 批量执行链下区块。


链下区块的几个状态。最开始是未确认状态，等提交了证明后变为已验证状态，在执行后变为已执行状态， 可以回滚未验证的区块。